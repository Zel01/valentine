<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#ff2d55" />
  <title>Valentine‚Äôs Invitation</title>

  <style>
    :root{
      --bg1:#0b0612;
      --bg2:#14081e;
      --card:#12071dcc;
      --stroke:#ffffff18;
      --text:#f7f2fb;
      --muted:#d9cbe6cc;
      --accent:#ff2d55;
      --accent2:#ff7aa2;
      --gold:#ffd1dc;
      --shadow: 0 24px 80px #00000080;
      --radius: 26px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 15%, #ff2d5522, transparent 60%),
        radial-gradient(900px 520px at 80% 30%, #ff7aa220, transparent 60%),
        radial-gradient(1200px 820px at 40% 80%, #a855f718, transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Subtle grain */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:.18;
      pointer-events:none;
    }

    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 18px 48px;
      position:relative;
    }

    /* Floating hearts */
    .float-layer{
      position:fixed;
      inset:0;
      overflow:hidden;
      pointer-events:none;
      z-index:0;
    }
    .heart{
      position:absolute;
      width:14px;height:14px;
      transform: rotate(45deg);
      background:linear-gradient(135deg, var(--accent), var(--accent2));
      opacity:.18;
      filter: blur(.1px);
      animation: drift linear infinite;
      border-radius:4px;
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:14px;height:14px;
      background:inherit;
      border-radius:50%;
    }
    .heart::before{left:-7px; top:0}
    .heart::after{top:-7px; left:0}
    @keyframes drift{
      from{ transform: translateY(110vh) rotate(45deg) scale(.8); }
      to  { transform: translateY(-20vh) rotate(45deg) scale(1.2); }
    }

    .card{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
      padding:18px;
      border-radius:var(--radius);
      background:linear-gradient(180deg, #ffffff0f, #ffffff06);
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      position:relative;
      z-index:1;
    }

    .panel{
      border-radius: calc(var(--radius) - 8px);
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, #0b0612a8, #0b061280);
      padding:18px;
    }

    .left{
      padding:22px 22px 18px;
      display:flex;
      flex-direction:column;
      gap:14px;
      position:relative;
      overflow:hidden;
    }

    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-radius:999px;
      background:#ffffff0f;
      border:1px solid var(--stroke);
      width:max-content;
      font-weight:600;
      letter-spacing:.2px;
      color:var(--gold);
    }
    .badge .dot{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
      box-shadow: 0 0 20px #ff2d5580;
    }

    h1{
      margin:0;
      font-size: clamp(32px, 4.2vw, 54px);
      line-height:1.02;
      letter-spacing:-.8px;
    }
    .names{
      display:inline-block;
      background: linear-gradient(90deg, #fff, #ffe6ef, #ffd1dc);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size: 15.5px;
      line-height:1.55;
      max-width:62ch;
    }

    .infoGrid{
      margin-top:8px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .info{
      padding:12px 12px;
      border-radius:18px;
      background:#ffffff08;
      border:1px solid var(--stroke);
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .ico{
      width:38px; height:38px;
      border-radius:14px;
      background: radial-gradient(circle at 30% 30%, #fff1, #0000), linear-gradient(135deg, #ff2d5530, #ff7aa220);
      border:1px solid #ff7aa224;
      display:grid;
      place-items:center;
      flex:0 0 auto;
    }
    .ico svg{ width:18px; height:18px; opacity:.95 }
    .info strong{ display:block; font-size:13px; color:#fff; margin-bottom:2px }
    .info span{ display:block; font-size:13px; color:var(--muted) }

    .ctaRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:10px;
    }
    .btn{
      appearance:none;
      border:1px solid var(--stroke);
      background:#ffffff0b;
      color:var(--text);
      padding:12px 14px;
      border-radius: 16px;
      font-weight:700;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      display:inline-flex;
      gap:10px;
      align-items:center;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); background:#ffffff12; border-color:#ffffff26; }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-color:#ff7aa240;
      box-shadow: 0 10px 36px #ff2d5536;
      color:#120712;
    }
    .btn.primary:hover{ box-shadow: 0 12px 46px #ff2d5548; }
    .btn.ghost{ background:transparent; }
    .btn small{ font-weight:800; opacity:.9 }

    .right{
      display:flex;
      flex-direction:column;
      gap:12px;
      padding:18px;
    }

    .preview{
      border-radius:22px;
      padding:16px;
      background:
        radial-gradient(800px 380px at 20% 10%, #ff2d5530, transparent 60%),
        radial-gradient(700px 420px at 80% 30%, #ff7aa22c, transparent 60%),
        linear-gradient(180deg, #ffffff10, #ffffff06);
      border:1px solid var(--stroke);
      position:relative;
      overflow:hidden;
    }

    .seal{
      position:absolute;
      right:14px; top:14px;
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid #ffffff22;
      background:#0b0612b0;
      backdrop-filter: blur(10px);
      font-weight:800;
      letter-spacing:.3px;
      color:#ffe6ef;
      font-size:12px;
    }

    .quote{
      margin:0;
      font-size: 16px;
      line-height:1.7;
      color:#f7f2fb;
      opacity:.96;
    }
    .quote em{
      font-style:normal;
      color:#ffd1dc;
      font-weight:800;
    }

    .countdown{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }
    .chip{
      padding:12px 10px;
      border-radius:18px;
      background:#ffffff0a;
      border:1px solid var(--stroke);
      text-align:center;
    }
    .chip b{
      display:block;
      font-size:20px;
      letter-spacing:.2px;
    }
    .chip span{
      display:block;
      margin-top:2px;
      font-size:12px;
      color:var(--muted);
      font-weight:700;
      letter-spacing:.8px;
      text-transform:uppercase;
    }

    .details{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .mini{
      padding:12px 12px;
      border-radius:18px;
      background:#ffffff08;
      border:1px solid var(--stroke);
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }
    .mini strong{ color:#fff }

    .footer{
      margin-top:auto;
      padding-top:6px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      color:#ffffff80;
      font-size:12px;
    }
    .footer a{ color:#ffffffb0; text-decoration:none; border-bottom:1px dashed #ffffff35 }
    .footer a:hover{ color:#fff; border-bottom-color:#ffffff70 }

    /* Modal */
    .modalBack{
      position:fixed; inset:0;
      background:#00000090;
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(560px, 100%);
      border-radius:24px;
      background: linear-gradient(180deg, #12071df2, #0b0612f2);
      border:1px solid #ffffff22;
      box-shadow: 0 30px 120px #000000aa;
      overflow:hidden;
    }
    .modalHead{
      padding:16px 16px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-bottom:1px solid #ffffff14;
    }
    .modalHead strong{ font-size:14px; letter-spacing:.4px; text-transform:uppercase; color:#ffe6ef }
    .x{
      border:1px solid #ffffff22;
      background:#ffffff08;
      color:#fff;
      width:38px; height:38px;
      border-radius:14px;
      cursor:pointer;
      font-weight:900;
    }
    .modalBody{ padding:16px; display:grid; gap:10px; }
    label{ font-size:12px; color:#ffffffb0; font-weight:800; letter-spacing:.6px; text-transform:uppercase; }
    input, textarea, select{
      width:100%;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid #ffffff20;
      background:#ffffff07;
      color:#fff;
      outline:none;
      font-size:14px;
    }
    textarea{ min-height:110px; resize:vertical; }
    .row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .modalFoot{
      padding:14px 16px 16px;
      display:flex;
      gap:10px;
      justify-content:flex-end;
      border-top:1px solid #ffffff14;
      flex-wrap:wrap;
    }

    /* Confetti hearts (generated by JS) */
    .burst{
      position:fixed; inset:0; pointer-events:none; z-index:80;
      overflow:hidden;
    }
    .spark{
      position:absolute;
      width:10px; height:10px;
      transform: rotate(45deg);
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius:3px;
      opacity:.9;
      animation: pop 900ms ease-out forwards;
    }
    .spark::before,.spark::after{
      content:"";
      position:absolute;
      width:10px; height:10px;
      background:inherit;
      border-radius:50%;
    }
    .spark::before{ left:-5px; top:0 }
    .spark::after{ top:-5px; left:0 }
    @keyframes pop{
      0% { transform: translate(0,0) rotate(45deg) scale(.8); opacity:0; }
      10%{ opacity:1; }
      100%{ transform: translate(var(--dx), var(--dy)) rotate(45deg) scale(1.2); opacity:0; }
    }

    @media (max-width: 920px){
      .card{ grid-template-columns: 1fr; }
      .infoGrid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="float-layer" id="floatLayer" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" aria-label="Valentine invitation">
      <div class="panel left">
        <div class="badge"><span class="dot"></span><span id="badgeText">A special invite</span></div>

        <h1>
          <span id="titlePrefix">You‚Äôre invited to</span><br/>
          <span class="names" id="titleNames">Valentine‚Äôs Night</span>
        </h1>

        <p class="subtitle" id="subtitle">
          A little escape from the world ‚Äî warm lights, good vibes, and a moment worth remembering.
        </p>

        <div class="infoGrid" role="list">
          <div class="info" role="listitem">
            <div class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M8 2v3M16 2v3M4.5 6.5h15M6 10h12M6 14h9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M6 22h12a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div>
              <strong>Date</strong>
              <span id="dateText">Friday, Feb 14</span>
            </div>
          </div>

          <div class="info" role="listitem">
            <div class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 8v5l3 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div>
              <strong>Time</strong>
              <span id="timeText">8:00 PM</span>
            </div>
          </div>

          <div class="info" role="listitem">
            <div class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M12 21s7-4.35 7-11a7 7 0 0 0-14 0c0 6.65 7 11 7 11Z" stroke="currentColor" stroke-width="2"/>
                <path d="M12 10.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div>
              <strong>Place</strong>
              <span id="placeText">Add a location</span>
            </div>
          </div>

          <div class="info" role="listitem">
            <div class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M20 8c0 7-8 12-8 12S4 15 4 8a4.5 4.5 0 0 1 8-2.5A4.5 4.5 0 0 1 20 8Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </div>
            <div>
              <strong>Dress code</strong>
              <span id="dressText">Smart casual</span>
            </div>
          </div>
        </div>

        <div class="ctaRow">
          <button class="btn primary" id="btnRSVP">
            <span>üíå RSVP</span> <small>(Tap to reply)</small>
          </button>

          <button class="btn" id="btnCalendar">üìÖ Add to Calendar</button>
          <button class="btn ghost" id="btnMap">üìç Open Map</button>
          <button class="btn ghost" id="btnCopy">üîó Copy Link Message</button>
        </div>

        <div class="footer">
          <span id="footerLeft">Made with love ‚ú®</span>
          <span>
            <a href="#" id="footerNote">Quick note</a>
          </span>
        </div>
      </div>

      <aside class="panel right">
        <div class="preview">
          <div class="seal" id="sealText">Valentine‚Äôs ‚Ä¢ Invitation</div>

          <p class="quote" id="quoteText">
            ‚ÄúIf you‚Äôre free, I‚Äôd love to spend <em>that</em> evening with you ‚Äî no pressure, just a beautiful time.‚Äù
          </p>

          <div class="countdown" aria-label="Countdown">
            <div class="chip"><b id="dd">‚Äî</b><span>Days</span></div>
            <div class="chip"><b id="hh">‚Äî</b><span>Hours</span></div>
            <div class="chip"><b id="mm">‚Äî</b><span>Minutes</span></div>
            <div class="chip"><b id="ss">‚Äî</b><span>Seconds</span></div>
          </div>
        </div>

        <div class="details">
          <div class="mini" id="mini1">
            <strong>Plan:</strong> A calm meet-up, a nice meal, and a small surprise.
          </div>
          <div class="mini" id="mini2">
            <strong>Reminder:</strong> Please RSVP so I can book the right spot.
          </div>
          <div class="mini" id="mini3">
            <strong>Optional:</strong> Bring your favorite playlist idea üé∂
          </div>
        </div>
      </aside>
    </section>
  </main>

  <!-- RSVP Modal -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true" aria-label="RSVP form">
    <div class="modal">
      <div class="modalHead">
        <strong id="modalTitle">RSVP</strong>
        <button class="x" id="btnClose" aria-label="Close">‚úï</button>
      </div>

      <div class="modalBody">
        <div class="row">
          <div>
            <label>Your name</label>
            <input id="rName" placeholder="Your name" autocomplete="name"/>
          </div>
          <div>
            <label>Guests</label>
            <select id="rGuests">
              <option value="1">1 (Just me)</option>
              <option value="2">2</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label>Answer</label>
            <select id="rAnswer">
              <option value="Yes">Yes, I‚Äôm in üíó</option>
              <option value="Maybe">Maybe (confirm soon)</option>
              <option value="No">Sorry, can‚Äôt make it</option>
            </select>
          </div>
          <div>
            <label>Contact</label>
            <input id="rContact" placeholder="WhatsApp / phone (optional)" inputmode="tel"/>
          </div>
        </div>

        <div>
          <label>Message (optional)</label>
          <textarea id="rMsg" placeholder="Add a sweet message or timing note..."></textarea>
        </div>

        <div class="mini" style="margin-top:4px">
          When you submit, it will open a WhatsApp message (or copy text if WhatsApp isn‚Äôt set).
        </div>
      </div>

      <div class="modalFoot">
        <button class="btn ghost" id="btnCopyRSVP">Copy RSVP text</button>
        <button class="btn primary" id="btnSendRSVP">Send via WhatsApp</button>
      </div>
    </div>
  </div>

  <div class="burst" id="burst" aria-hidden="true"></div>

  <script>
    /**
     * =========================
     * EDIT THESE SETTINGS ONLY
     * =========================
     */
    const CONFIG = {
      badgeText: "A special invite",
      titlePrefix: "You‚Äôre invited to",
      titleNames: "Valentine‚Äôs Night",
      subtitle: "A little escape from the world ‚Äî warm lights, good vibes, and a moment worth remembering.",

      // Event info
      eventTitle: "Valentine‚Äôs Night",
      // IMPORTANT: use local time format "YYYY-MM-DDTHH:MM:SS" (no Z) so it counts down correctly for your timezone
      eventStartLocal: "2026-02-14T20:00:00",
      durationMinutes: 180,

      dateText: "Saturday, Feb 14, 2026",
      timeText: "8:00 PM",
      placeText: "Your Location (edit me)",
      dressText: "Smart casual",

      // Map: put a searchable query or a google maps link
      mapQuery: "Beirut, Lebanon",

      // WhatsApp number in international format WITHOUT + (example Lebanon: 961XXXXXXXX)
      whatsappNumber: "96100000000",

      // Message templates
      quoteText: "‚ÄúIf you‚Äôre free, I‚Äôd love to spend that evening with you ‚Äî no pressure, just a beautiful time.‚Äù",
      mini1: "<strong>Plan:</strong> A calm meet-up, a nice meal, and a small surprise.",
      mini2: "<strong>Reminder:</strong> Please RSVP so I can book the right spot.",
      mini3: "<strong>Optional:</strong> Bring your favorite playlist idea üé∂",

      sealText: "Valentine‚Äôs ‚Ä¢ Invitation",
      footerLeft: "Made with love ‚ú®",
      footerNoteText: "Quick note",
      quickNoteAlert: "Tip: You can customize the text + date + location in the CONFIG section at the bottom of the file."
    };

    // Apply config to UI
    const $ = (id) => document.getElementById(id);
    $("badgeText").textContent = CONFIG.badgeText;
    $("titlePrefix").textContent = CONFIG.titlePrefix;
    $("titleNames").textContent = CONFIG.titleNames;
    $("subtitle").textContent = CONFIG.subtitle;

    $("dateText").textContent = CONFIG.dateText;
    $("timeText").textContent = CONFIG.timeText;
    $("placeText").textContent = CONFIG.placeText;
    $("dressText").textContent = CONFIG.dressText;

    $("quoteText").innerHTML = CONFIG.quoteText;
    $("mini1").innerHTML = CONFIG.mini1;
    $("mini2").innerHTML = CONFIG.mini2;
    $("mini3").innerHTML = CONFIG.mini3;

    $("sealText").textContent = CONFIG.sealText;
    $("footerLeft").textContent = CONFIG.footerLeft;
    $("footerNote").textContent = CONFIG.footerNoteText;

    $("footerNote").addEventListener("click", (e) => {
      e.preventDefault();
      alert(CONFIG.quickNoteAlert);
    });

    // Floating hearts background
    const floatLayer = $("floatLayer");
    const heartsCount = 24;
    for(let i=0;i<heartsCount;i++){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random()*100;
      const size = 10 + Math.random()*18;
      const dur = 10 + Math.random()*18;
      const delay = -Math.random()*dur;
      h.style.left = left + "vw";
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.animationDuration = dur + "s";
      h.style.animationDelay = delay + "s";
      h.style.opacity = (0.10 + Math.random()*0.18).toFixed(2);
      floatLayer.appendChild(h);
    }

    // Countdown
    const target = new Date(CONFIG.eventStartLocal).getTime();
    function pad(n){ return String(n).padStart(2,"0"); }
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff / (1000*60*60*24));
      diff -= d * (1000*60*60*24);
      const h = Math.floor(diff / (1000*60*60));
      diff -= h * (1000*60*60);
      const m = Math.floor(diff / (1000*60));
      diff -= m * (1000*60);
      const s = Math.floor(diff / 1000);

      $("dd").textContent = d;
      $("hh").textContent = pad(h);
      $("mm").textContent = pad(m);
      $("ss").textContent = pad(s);
    }
    tick();
    setInterval(tick, 1000);

    // Map button
    $("btnMap").addEventListener("click", () => {
      const q = encodeURIComponent(CONFIG.mapQuery || CONFIG.placeText);
      window.open("https://www.google.com/maps/search/?api=1&query=" + q, "_blank", "noopener,noreferrer");
    });

    // Add to Calendar (ICS)
    function downloadICS(){
      const start = new Date(CONFIG.eventStartLocal);
      const end = new Date(start.getTime() + CONFIG.durationMinutes*60000);

      function toICSDate(d){
        // Local -> "YYYYMMDDTHHMMSS"
        const YYYY = d.getFullYear();
        const MM = String(d.getMonth()+1).padStart(2,"0");
        const DD = String(d.getDate()).padStart(2,"0");
        const HH = String(d.getHours()).padStart(2,"0");
        const mm = String(d.getMinutes()).padStart(2,"0");
        const ss = String(d.getSeconds()).padStart(2,"0");
        return `${YYYY}${MM}${DD}T${HH}${mm}${ss}`;
      }

      const uid = "val-" + Math.random().toString(16).slice(2) + "@invite";
      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Valentine Invite//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${toICSDate(new Date())}
DTSTART:${toICSDate(start)}
DTEND:${toICSDate(end)}
SUMMARY:${escapeICS(CONFIG.eventTitle)}
LOCATION:${escapeICS(CONFIG.placeText)}
DESCRIPTION:${escapeICS("RSVP link: " + location.href)}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], {type:"text/calendar;charset=utf-8"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "valentine-invite.ics";
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
    }
    function escapeICS(s){
      return String(s || "").replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;");
    }
    $("btnCalendar").addEventListener("click", downloadICS);

    // Copy link message
    $("btnCopy").addEventListener("click", async () => {
      const msg = `üíå Valentine‚Äôs Invitation\n${CONFIG.dateText} ‚Ä¢ ${CONFIG.timeText}\n${CONFIG.placeText}\n\nOpen: ${location.href}`;
      try{
        await navigator.clipboard.writeText(msg);
        toast("Copied ‚ú®");
      }catch{
        prompt("Copy this message:", msg);
      }
    });

    // Modal open/close
    const modalBack = $("modalBack");
    function openModal(){ modalBack.style.display="flex"; }
    function closeModal(){ modalBack.style.display="none"; }
    $("btnRSVP").addEventListener("click", openModal);
    $("btnClose").addEventListener("click", closeModal);
    modalBack.addEventListener("click", (e)=>{ if(e.target === modalBack) closeModal(); });
    window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

    // Build RSVP message
    function buildRSVPText(){
      const name = $("rName").value.trim() || "Someone";
      const guests = $("rGuests").value;
      const answer = $("rAnswer").value;
      const contact = $("rContact").value.trim();
      const msg = $("rMsg").value.trim();

      const lines = [
        `RSVP ‚Äî ${CONFIG.eventTitle}`,
        `Name: ${name}`,
        `Answer: ${answer}`,
        `Guests: ${guests}`,
        contact ? `Contact: ${contact}` : null,
        msg ? `Message: ${msg}` : null,
        `‚Äî`,
        `Event: ${CONFIG.dateText} ‚Ä¢ ${CONFIG.timeText}`,
        `Place: ${CONFIG.placeText}`
      ].filter(Boolean);

      return lines.join("\n");
    }

    // Copy RSVP text
    $("btnCopyRSVP").addEventListener("click", async ()=>{
      const text = buildRSVPText();
      try{
        await navigator.clipboard.writeText(text);
        toast("RSVP copied ‚úÖ");
      }catch{
        prompt("Copy RSVP:", text);
      }
    });

    // Send RSVP via WhatsApp
    $("btnSendRSVP").addEventListener("click", ()=>{
      const text = buildRSVPText();
      const phone = (CONFIG.whatsappNumber || "").replace(/\D/g,"");
      if(!phone || phone.length < 8){
        alert("Add your WhatsApp number in CONFIG (whatsappNumber) first.");
        return;
      }

      // Celebration if "Yes"
      if(($("rAnswer").value || "").toLowerCase().includes("yes")) burst();

      const url = `https://wa.me/${phone}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank", "noopener,noreferrer");
      closeModal();
    });

    // Tiny toast
    let toastTimer = null;
    function toast(t){
      clearTimeout(toastTimer);
      let el = document.getElementById("toast");
      if(!el){
        el = document.createElement("div");
        el.id = "toast";
        el.style.position="fixed";
        el.style.left="50%";
        el.style.bottom="22px";
        el.style.transform="translateX(-50%)";
        el.style.padding="12px 14px";
        el.style.borderRadius="16px";
        el.style.border="1px solid #ffffff22";
        el.style.background="linear-gradient(180deg,#12071df2,#0b0612f2)";
        el.style.boxShadow="0 18px 60px #000000aa";
        el.style.zIndex="99";
        el.style.fontWeight="800";
        el.style.letterSpacing=".2px";
        document.body.appendChild(el);
      }
      el.textContent = t;
      el.style.opacity="1";
      toastTimer = setTimeout(()=>{ el.style.opacity="0"; }, 1400);
    }

    // Heart confetti burst
    const burstLayer = $("burst");
    function burst(){
      const count = 22;
      const cx = window.innerWidth * 0.5;
      const cy = window.innerHeight * 0.5;

      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "spark";
        s.style.left = (cx + (Math.random()*40-20)) + "px";
        s.style.top  = (cy + (Math.random()*30-15)) + "px";
        const dx = (Math.random()*520 - 260) + "px";
        const dy = (Math.random()*-520 - 120) + "px";
        s.style.setProperty("--dx", dx);
        s.style.setProperty("--dy", dy);
        s.style.animationDelay = (Math.random()*120) + "ms";
        burstLayer.appendChild(s);
        setTimeout(()=>s.remove(), 1200);
      }
    }
  </script>
</body>
</html>
